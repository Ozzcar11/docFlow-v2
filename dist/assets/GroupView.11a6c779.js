import{B as Z}from"./BackIcon.9f17e597.js";import{C as uu}from"./CloseIcon.bcaa206e.js";import{_ as F}from"./PlusIcon.vue_vue_type_script_setup_true_lang.d9b0016e.js";import{d as eu,u as lu,k as i,n as h,l as au,r as d,e as j,a as u,w as e,F as $,o as I,b as tu,i as ou,h as t,g as r,t as L,f as su}from"./index.73329af3.js";import{U as N}from"./users.cf07a31b.js";import{D as g}from"./departments.2cf32212.js";import"./_plugin-vue_export-helper.cdc0426e.js";const nu=r("span",{class:"mx-4 text-2xl opacity-10 h-10"},"|",-1),du={class:"flex items-center justify-between mb-8"},ru={class:"flex items-center"},_u=r("div",{class:"mr-4 text-2xl font-medium"},"\u0420\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438",-1),pu={class:"flex items-center"},iu={class:""},mu={class:"dialog-footer"},cu={class:"dialog-footer"},fu={class:"dialog-footer"},xu=eu({__name:"GroupView",setup(vu){const f=lu(),G=i(""),T=i([{id:12,name:"\u041C\u0443\u0445\u0442\u0430\u0440\u043E\u0432 \u041C\u0443\u0445\u0442\u0430\u0440 \u041C\u0443\u0445\u0442\u0430\u0440\u043E\u0432\u0438\u0447",role:"Backend"},{id:11,name:"\u041C\u0443\u0445\u0442\u0430\u0440\u043E\u0432 \u041C\u0443\u0445\u0442\u0430\u0440 \u041C\u0443\u0445\u0442\u0430\u0440\u043E\u0432\u0438\u0447",role:"Backend"}]),s=i({last_name:"",first_name:"",middle_name:"",login:"",job:"",password:"",description:""}),b=i([]);h(()=>T.value);const z=async()=>{const o=Object.keys(E.value).map(_=>+_);await g.deleteUser({id_department:+f.params.id,id_users:o,action:"add"});const a=await g.getDepartment(f.params.id);b.value=a.data,m.value=!1},P=async()=>{const o=await N.createUser(s.value);await g.deleteUser({id_department:f.params.id,id_users:[o.data.id],action:"add"}),C(),U(),V.value=!1},S=()=>{m.value=!1,V.value=!0},E=i([]),m=i(!1),D=i(!1),V=i(!1),M=()=>{m.value=!0},O=[{value:"Frontend",label:"\u0424\u0440\u043E\u043D\u0442\u044D\u043D\u0434"},{value:"Backend",label:"\u0411\u0435\u043A\u044D\u043D\u0434"}],R=h(()=>b.value.length!==0?b.value.find(o=>(o==null?void 0:o.is_chief)==="True").full_name:"\u041D\u0435\u0442 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F"),q=async o=>{await g.deleteUser({id_department:+f.params.id,id_users:[o],action:"remove"}),C(),U()},H=()=>{C(),D.value=!1},C=async()=>{const o=await g.getDepartment(f.params.id);b.value=o.data},x=i([]),J=h(()=>x.value.filter(o=>!o.groups.find(a=>a.id===+f.params.id))),U=async()=>{const o=await N.getUsers();x.value=o.data};return au(()=>{C(),U()}),(o,a)=>{const _=d("el-button"),k=d("el-breadcrumb-item"),K=d("el-breadcrumb"),Q=d("el-header"),p=d("el-table-column"),y=d("el-table"),W=d("el-main"),A=d("el-checkbox"),B=d("el-dialog"),n=d("el-col"),v=d("el-input"),c=d("el-row"),X=d("el-option"),Y=d("el-select");return I(),j($,null,[u(Q,{class:"header-groups"},{default:e(()=>[u(_,{type:"primary",class:"header-groups__button",onClick:a[0]||(a[0]=l=>tu(ou).push("/groups"))},{default:e(()=>[u(Z,{class:"w-6 h-6 mr-2"}),t(" \u041A \u0441\u043F\u0438\u0441\u043A\u0443 ")]),_:1}),nu,u(K,{separator:"/"},{default:e(()=>[u(k,{to:{path:"/groups"}},{default:e(()=>[t("\u041E\u0442\u0434\u0435\u043B\u044B")]),_:1}),u(k,null,{default:e(()=>[t("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")]),_:1})]),_:1})]),_:1}),u(W,null,{default:e(()=>[r("div",du,[r("div",ru,[_u,u(_,{class:"header-groups__button_blue",onClick:M},{default:e(()=>[u(F,{class:"w-6 h-6 mr-2"}),t(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u043E\u0432")]),_:1})]),r("div",pu,[r("div",iu,"\u0420\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C: "+L(R.value),1)])]),u(y,{data:b.value,style:{width:"100%"}},{default:e(()=>[u(p,{prop:"full_name",label:"\u0424\u0418\u041E"}),u(p,{prop:"username",label:"\u041B\u043E\u0433\u0438\u043D"}),u(p,{prop:"job",label:"\u0414\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C"}),u(p,{width:"100"},{default:e(({row:{id:l}})=>[u(uu,{onClick:w=>q(l),style:{cursor:"pointer"}},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),u(B,{class:"dialog",modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=l=>m.value=l),title:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u043E\u0432 \u0432 \u043E\u0442\u0434\u0435\u043B",width:"50%"},{footer:e(()=>[r("span",mu,[u(_,{onClick:a[1]||(a[1]=l=>m.value=!1),class:"header-groups__button font-medium px-4 py-2.5 rounded-xl h-10"},{default:e(()=>[t("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1}),u(_,{onClick:z,class:"header-groups__button_blue"},{default:e(()=>[t(" \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C ")]),_:1})])]),default:e(()=>[u(y,{class:"group-adduser",data:J.value,width:"100%"},{default:e(()=>[u(p,{prop:"first_name"}),u(p,{prop:"job"}),u(p,{width:"50"},{default:e(({row:{id:l}})=>[u(A,{modelValue:E.value[l],"onUpdate:modelValue":w=>E.value[l]=w,size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),r("div",null,[r("button",{onClick:S,class:"px-2.5 py-3 rounded-xl bg-gray-200 mt-4 w-full text-left flex justify-between"},[r("span",null,[t("\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),r("b",null,L(G.value),1)]),u(F,{color:"black"})])])]),_:1},8,["modelValue"]),u(B,{class:"dialog",modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=l=>D.value=l),title:"\u0420\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u043E\u0442\u0434\u0435\u043B\u0430",width:"50%"},{footer:e(()=>[r("span",cu,[u(_,{onClick:a[3]||(a[3]=l=>m.value=!1),class:"header-groups__button font-medium px-4 py-2.5 rounded-xl h-10"},{default:e(()=>[t("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1}),u(_,{onClick:H,class:"header-groups__button_blue"},{default:e(()=>[t(" \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C ")]),_:1})])]),default:e(()=>[u(y,{data:x.value,style:{"overflow-y":"auto","max-height":"500px"},width:"100%"},{default:e(()=>[u(p,{prop:"first_name"}),u(p,{prop:"job"}),u(p,{width:"50"},{default:e(({row:{id:l}})=>[u(A,{modelValue:E.value[l],"onUpdate:modelValue":w=>E.value[l]=w,size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),u(B,{class:"dialog-create-user",modelValue:V.value,"onUpdate:modelValue":a[13]||(a[13]=l=>V.value=l),title:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430",width:"50%"},{footer:e(()=>[r("span",fu,[u(_,{onClick:a[12]||(a[12]=l=>V.value=!1),class:"header-groups__button font-medium px-4 py-2.5 rounded-xl h-10"},{default:e(()=>[t("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1}),u(_,{onClick:P,class:"header-groups__button_blue"},{default:e(()=>[t(" \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C ")]),_:1})])]),default:e(()=>[u(c,null,{default:e(()=>[u(n,{span:14},{default:e(()=>[t("\u0424\u0430\u043C\u0438\u043B\u0438\u044F")]),_:1}),u(n,{span:10},{default:e(()=>[u(v,{modelValue:s.value.last_name,"onUpdate:modelValue":a[5]||(a[5]=l=>s.value.last_name=l),class:"create-user__input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(c,null,{default:e(()=>[u(n,{span:14},{default:e(()=>[t("\u0418\u043C\u044F")]),_:1}),u(n,{span:10},{default:e(()=>[u(v,{modelValue:s.value.first_name,"onUpdate:modelValue":a[6]||(a[6]=l=>s.value.first_name=l),class:"create-user__input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(c,null,{default:e(()=>[u(n,{span:14},{default:e(()=>[t("\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E")]),_:1}),u(n,{span:10},{default:e(()=>[u(v,{modelValue:s.value.middle_name,"onUpdate:modelValue":a[7]||(a[7]=l=>s.value.middle_name=l),class:"create-user__input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(c,null,{default:e(()=>[u(n,{span:14},{default:e(()=>[t("\u041B\u043E\u0433\u0438\u043D")]),_:1}),u(n,{span:10},{default:e(()=>[u(v,{modelValue:s.value.username,"onUpdate:modelValue":a[8]||(a[8]=l=>s.value.username=l),class:"create-user__input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(c,null,{default:e(()=>[u(n,{span:14},{default:e(()=>[t("\u041F\u0430\u0440\u043E\u043B\u044C")]),_:1}),u(n,{span:10},{default:e(()=>[u(v,{modelValue:s.value.password,"onUpdate:modelValue":a[9]||(a[9]=l=>s.value.password=l),type:"password",class:"create-user__input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(c,null,{default:e(()=>[u(n,{span:14},{default:e(()=>[t("\u0414\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C")]),_:1}),u(n,{span:10},{default:e(()=>[u(Y,{modelValue:s.value.job,"onUpdate:modelValue":a[10]||(a[10]=l=>s.value.job=l),class:"w-full create-select",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C"},{default:e(()=>[(I(),j($,null,su(O,l=>u(X,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(c,null,{default:e(()=>[u(n,{span:14},{default:e(()=>[t("\u0414\u043E\u043F. \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F")]),_:1}),u(n,{span:10},{default:e(()=>[u(v,{modelValue:s.value.description,"onUpdate:modelValue":a[11]||(a[11]=l=>s.value.description=l),maxlength:"100",class:"create-user__textarea",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043A\u0441\u0442","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{xu as default};
