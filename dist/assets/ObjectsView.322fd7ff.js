import{E as P}from"./EditIcon.cf189da4.js";import{_ as g}from"./PlusIcon.vue_vue_type_script_setup_true_lang.d9b0016e.js";import{D as i,d as A,k as p,l as V,r as t,e as m,a as u,w as e,F,o as r,g as _,c as I,h as $,m as N}from"./index.73329af3.js";import{_ as O}from"./CheckIcon.vue_vue_type_script_setup_true_lang.a8a1eedb.js";import{C as M}from"./CloseIcon.bcaa206e.js";import{C as T}from"./config.ae5aee18.js";import"./_plugin-vue_export-helper.cdc0426e.js";const d={getProjects(){return i.get("/project/")},createProject(s){return i.post("/project/",s)},startProject(s){return i.put(`/project/${s}/start_project/`)}},U={class:"flex ml-1"},q=_("div",{class:"text-2xl"},"\u041E\u0431\u044A\u0435\u043A\u0442\u044B",-1),z=_("span",{class:"mx-4 text-2xl opacity-10"},"|",-1),G=["onClick"],H=_("span",{class:"mr-2"},"\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C",-1),J={key:1},Z=A({__name:"ObjectsView",setup(s){p("");const f=p([]),c=async()=>{const n=await d.getProjects();f.value=n.data},l=p(""),C=async n=>{await d.startProject(n),c()},h=async()=>{await d.createProject({name:l.value}),c(),l.value=""},w=async n=>{await T.deleteProject(+n),c()};return V(()=>{c()}),(n,b)=>{const v=t("el-input"),E=t("el-button"),x=t("el-header"),o=t("el-table-column"),y=t("router-link"),D=t("el-popconfirm"),k=t("el-table"),B=t("el-main");return r(),m(F,null,[u(x,{class:"header-users"},{default:e(()=>[_("div",U,[q,z,u(v,{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=a=>l.value=a),class:"create-newobject",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043E\u0431\u044A\u0435\u043A\u0442\u0430 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F",clearable:""},null,8,["modelValue"]),l.value.length!==0?(r(),I(E,{key:0,type:"primary",class:"header-users__button",onClick:h},{default:e(()=>[$(" \u0421\u043E\u0437\u0434\u0430\u0442\u044C "),u(g,{class:"w-6 h-6 ml-2"})]),_:1})):N("",!0)])]),_:1}),u(B,null,{default:e(()=>[u(k,{data:f.value,style:{width:"100%"}},{default:e(()=>[u(o,{prop:"name",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),u(o,{prop:"user",label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}),u(o,{prop:"last_change",label:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435"}),u(o,{prop:"date_create",label:"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F"}),u(o,{align:"center",label:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"},{default:e(({row:{id:a}})=>[u(y,{class:"flex justify-center",to:`/project/${a}`},{default:e(()=>[u(P)]),_:2},1032,["to"])]),_:1}),u(o,{width:"",label:"\u0421\u0442\u0430\u0442\u0443\u0441"},{default:e(({row:{active:a,id:j}})=>[a?(r(),m("div",J,"\u0412 \u0440\u0430\u0431\u043E\u0442\u0435")):(r(),m("div",{key:0,class:"flex cursor-pointer",onClick:K=>C(j)},[H,u(O,{color:"black"})],8,G))]),_:1}),u(o,{width:"",label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"},{default:e(({row:{id:a}})=>[u(D,{title:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043E\u0431\u044A\u0435\u043A\u0442?",onConfirm:j=>w(a),"confirm-button-text":"\u0414\u0430","cancel-button-text":"\u041D\u0435\u0442"},{reference:e(()=>[u(M,{class:"cursor-pointer"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})],64)}}});export{Z as default};
