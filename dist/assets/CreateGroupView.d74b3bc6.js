import{_ as U}from"./PlusIcon.vue_vue_type_script_setup_true_lang.d9b0016e.js";import{d as k,k as p,n as N,l as A,r as t,e as G,a as u,w as a,F as L,o as $,g as i,h as s,t as I,i as M,E as C}from"./index.73329af3.js";import{D as P}from"./departments.2cf32212.js";import{U as j}from"./users.cf07a31b.js";import{f as z}from"./fullName.c6277e6d.js";const S={class:"flex ml-1"},T=i("div",{class:"text-2xl"},"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043E\u0442\u0434\u0435\u043B\u0430",-1),q=i("span",{class:"mx-4 text-2xl opacity-10"},"|",-1),H={class:"dialog-footer"},X=k({__name:"CreateGroupView",setup(J){const d=p(null),_=p({name:"",chief:null}),D=async()=>{try{_.value.chief=d.value;const o=await P.createDepartment(_.value);M.push("/groups/")}catch(o){o.response.data[0]==="User is already responsible for another department"?C.error("\u0414\u0430\u043D\u043D\u044B\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0436\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u0435\u043C \u0434\u0440\u0443\u0433\u043E\u0433\u043E \u043E\u0442\u0434\u0435\u043B\u0430"):C.error("\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0432\u043D\u0435\u0441\u0451\u043D\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")}},b=()=>{r.value=!1},B=N(()=>{const o=n.value.find(e=>+e.id==d.value);return o||null}),n=p([]),r=p(!1),g=async()=>{const o=await j.getUsers();n.value=o.data,n.value=n.value.map(e=>({...e,fullName:z(e.first_name,e.last_name,e.middle_name)}))};return A(()=>{g()}),(o,e)=>{const c=t("el-button"),h=t("el-header"),f=t("el-col"),w=t("el-input"),E=t("el-row"),V=t("el-main"),v=t("el-table-column"),x=t("el-radio"),y=t("el-table"),F=t("el-dialog");return $(),G(L,null,[u(h,{class:"header-users"},{default:a(()=>[i("div",S,[T,q,u(c,{type:"primary",class:"header-users__button",onClick:D},{default:a(()=>[s(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C "),u(U,{class:"w-6 h-6 ml-2"})]),_:1})])]),_:1}),u(V,null,{default:a(()=>[u(E,{class:"mb-3"},{default:a(()=>[u(f,{span:8},{default:a(()=>[s("\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435")]),_:1}),u(f,{span:6},{default:a(()=>[u(w,{modelValue:_.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>_.value.name=l),class:"create-user__input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(E,null,{default:a(()=>[u(f,{span:8},{default:a(()=>[s("\u0420\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C")]),_:1}),u(c,{class:"header-users__button white-btn",size:"default",onClick:e[1]||(e[1]=l=>r.value=!0)},{default:a(()=>{var l,m;return[s(I((m=(l=B.value)==null?void 0:l.fullName)!=null?m:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F"),1)]}),_:1})]),_:1})]),_:1}),u(F,{class:"dialog",modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value=l),title:"\u0420\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u043E\u0442\u0434\u0435\u043B\u0430",width:"50%"},{footer:a(()=>[i("span",H,[u(c,{onClick:e[3]||(e[3]=l=>r.value=!1),class:"header-groups__button font-medium px-4 py-2.5 rounded-xl h-10"},{default:a(()=>[s("\u041E\u0442\u043C\u0435\u043D\u0430")]),_:1}),u(c,{onClick:b,class:"header-groups__button_blue"},{default:a(()=>[s(" \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C ")]),_:1})])]),default:a(()=>[u(y,{data:n.value,class:"create-dialog",width:"100%"},{default:a(()=>[u(v,{prop:"fullName"}),u(v,{prop:"job"}),u(v,{width:"50"},{default:a(({row:{id:l}})=>[u(x,{id:"leader",modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=m=>d.value=m),label:l},null,8,["modelValue","label"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}});export{X as default};
