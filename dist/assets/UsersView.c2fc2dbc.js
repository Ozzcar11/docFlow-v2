import{E as w}from"./EditIcon.cf189da4.js";import{_ as x}from"./PlusIcon.vue_vue_type_script_setup_true_lang.d9b0016e.js";import{C as B}from"./CloseIcon.bcaa206e.js";import{d as C,k as p,l as v,r as o,e as g,a as e,w as u,F as y,o as U,g as l,b as k,i as D,h as N,t as F}from"./index.73329af3.js";import{U as m}from"./users.cf07a31b.js";import{f as V}from"./fullName.c6277e6d.js";import"./_plugin-vue_export-helper.cdc0426e.js";const $={class:"flex ml-1"},I=l("div",{class:"text-2xl"},"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438",-1),j=l("span",{class:"mx-4 text-2xl opacity-10"},"|",-1),A={class:"whitespace-pre"},K=C({__name:"UsersView",setup(M){p("");const _=p([]),c=async()=>{const n=await m.getUsers();_.value=n.data.map(t=>({...t,fullName:V(t.last_name,t.first_name,t.middle_name),groups:t.groups.map(r=>r.name).join(`
`)}))},i=async n=>{await m.deleteUser(n),c()};return v(()=>{c()}),(n,t)=>{const r=o("el-button"),d=o("el-header"),s=o("el-table-column"),f=o("router-link"),b=o("el-popconfirm"),h=o("el-table"),E=o("el-main");return U(),g(y,null,[e(d,{class:"header-users"},{default:u(()=>[l("div",$,[I,j,e(r,{type:"primary",class:"header-users__button",onClick:t[0]||(t[0]=a=>k(D).push("/users/create-user/"))},{default:u(()=>[N(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C "),e(x,{class:"w-6 h-6 ml-2"})]),_:1})])]),_:1}),e(E,null,{default:u(()=>[e(h,{data:_.value,style:{width:"100%"}},{default:u(()=>[e(s,{prop:"fullName",label:"\u0424\u0418\u041E"}),e(s,{prop:"username",label:"\u041B\u043E\u0433\u0438\u043D"}),e(s,{prop:"groups",label:"\u041E\u0442\u0434\u0435\u043B"},{default:u(({row:{groups:a}})=>[l("div",A,F(a),1)]),_:1}),e(s,{prop:"job",label:"\u0414\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C"}),e(s,{width:"50"},{default:u(({row:{id:a}})=>[e(f,{to:`/users/${a}`},{default:u(()=>[e(w)]),_:2},1032,["to"])]),_:1}),e(s,{width:"50"},{default:u(({row:{id:a}})=>[e(b,{title:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F?",onConfirm:P=>i(a),"confirm-button-text":"\u0414\u0430","cancel-button-text":"\u041D\u0435\u0442"},{reference:u(()=>[e(B,{class:"cursor-pointer"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})],64)}}});export{K as default};
